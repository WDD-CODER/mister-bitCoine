<div class="main-container">
    @if (user_(); as user) {
    <article class="user-info simple-cards-grid">
        <h1 class="user-name ">Hello :
            <span>{{ user.name }}</span>
        </h1>
        <section class="balance">
            <div (highlight)="onSaveTxt($event)" class="funds">
                <img src="assets/img/coins.png" alt="coins icon">
                <span class="amount"> Coins : {{user.coins}}</span>
            </div>
            <div (highlight)="onSaveTxt($event)" class="funds">
                <img src="assets/img/bitcoin.png" alt="bitcoin icon">
                @if( btcRate_(); as btcRate;) {
                <span class="amount ">BTC : {{btcRate}}</span>
                }
                @else {<p>loading BTC value</p>}
            </div>
        </section>
    </article>

    <section class="transfers">
        @if (userMoves_(); as userMoves) {
            <h4 class="title">Received Funds</h4>
        @for ( move of userMoves_(); track move) {

        <article class="transfer">
            @if (move.toId === user._id) {
            <h4>Sent To : <span>{{move.to}} </span></h4>
            <section class="details">
                <div>Send At: <span>{{move.at | date : 'dd/MM/yyyy'}} </span></div>
                <div>Amount : <span>{{move.amount}} </span></div>
            </section>
            } @else {
            <section class="details">
                <div>Send At: <span>{{move.at | date : 'dd/MM/yyyy'}} </span></div>
                <div>Amount : <span>{{move.amount}} </span></div>
            </section>
            }
        </article>
        } @empty { <div class="transfers" #noTransfers>No transaction Yat</div>}
        
        }
    </section>

    <section class="actions">
        <button (click)="makeTransaction($event)">Make transaction</button>
        <button (click)="onLogout($event)">Logout</button>
    </section>
    }
    <router-outlet />
</div>